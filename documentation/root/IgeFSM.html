<html>
<head>
	<link type="text/css" rel="stylesheet" href="../css/default.css" />
    <link type="text/css" rel="stylesheet" href="../js/rainbow/themes/sunburst.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
	<div class="page">
<h2>IgeFSM <span>CLASS</span></h2>
<p>Declared in <a href="../../engine/core/IgeFSM.js">IgeFSM.js</a></p>
<div class="itemBox">
	<div class="header">Description</div>
	<div class="content">A simple finite state machine implementation.</div>
</div>
<!--=if{extends}[-->
<div class="itemBox">
	<div class="header">Extends</div>
	<div class="content"><a href="IgeClass.html">IgeClass</a></div>
</div>
<!--=if{extends}]-->
<h2>Methods</h2><a name="initialStateName"></a>
<h3 class="methodTitle">initialStateName</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Returns the name of the initial state.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">initialStateName</span>()</div>
    <div class="methodArgs"></div>
    <div class="methodReturnDesc">Returns {<span class="argType">string</span>} </div>
    
</div><a name="previousStateName"></a>
<h3 class="methodTitle">previousStateName</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Returns the name of the previous state.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">previousStateName</span>()</div>
    <div class="methodArgs"></div>
    <div class="methodReturnDesc">Returns {<span class="argType">string</span>} </div>
    
</div><a name="currentStateName"></a>
<h3 class="methodTitle">currentStateName</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Returns the name of the current state.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">currentStateName</span>()</div>
    <div class="methodArgs"></div>
    <div class="methodReturnDesc">Returns {<span class="argType">string</span>} </div>
    
</div><a name="debug"></a>
<h3 class="methodTitle">debug</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Gets / sets the debug flag. If set to true will enable console logging of state changes / events.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">debug</span>({<span class="argType">Boolean</span>} <span class="argName">val</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">Boolean</span>}<span class="argName">val</span> Set to true to enable.</li></ul></div>
    <div class="methodReturnDesc">Returns {<span class="argType">*</span>} </div>
    
</div><a name="defineState"></a>
<h3 class="methodTitle">defineState</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Defines a state with a name and a state definition.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">defineState</span>({<span class="argType">String</span>} <span class="argName">name</span>, {<span class="argType">Object</span>} <span class="argName">definition</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">name</span> The name of the state to define.</li><li>{<span class="argType">Object</span>}<span class="argName">definition</span> The state definition object.</li></ul></div>
    <div class="methodReturnDesc">Returns {<span class="argType">IgeFSM</span>} </div>
    
					<div class="methodExample">
						<div class="content"><h1>Define a state</h1>

<pre><code>var fsm = new IgeFSM();

// Define an "idle" state
fsm.defineState('idle', {
    enter: function (data, completeCallback) {
        console.log('entered idle state');
        completeCallback();
    },
    exit: function (data, completeCallback) {
        console.log('exited idle state');
        completeCallback();
    }
});
</code></pre>
</div>
					</div>
				
</div><a name="defineTransition"></a>
<h3 class="methodTitle">defineTransition</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Defines a transition between two states.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">defineTransition</span>({<span class="argType">String</span>} <span class="argName">fromState</span>, {<span class="argType">String</span>} <span class="argName">toState</span>, {<span class="argType">Function</span>} <span class="argName">transitionCheck</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">fromState</span> The state name the transition is from.</li><li>{<span class="argType">String</span>}<span class="argName">toState</span> The state name the transition is to.</li><li>{<span class="argType">Function</span>}<span class="argName">transitionCheck</span> A method to call just before this transition between the two specified states is executed, that will call the callback method passed to it in the second parameter and include either true to allow the transition to continue, or false to cancel it in the first parameter.</li></ul></div>
    <div class="methodReturnDesc">Returns {<span class="argType">*</span>} </div>
    
					<div class="methodExample">
						<div class="content"><h1>Define a state transition</h1>

<pre><code>var fsm = new IgeFSM();

// Define an "idle" state
fsm.defineState('idle', {
    enter: function (data, completeCallback) {
        console.log('entered idle state');
        completeCallback();
    },
    exit: function (data, completeCallback) {
        console.log('exited idle state');
        completeCallback();
    }
});

// Define a "moving" state
fsm.defineState('moving', {
    enter: function (data, completeCallback) {
        console.log('entered moving state');
        completeCallback();
    },
    exit: function (data, completeCallback) {
        console.log('exited moving state');
        completeCallback();
    }
});

// Define a transition between the two methods
fsm.defineTransition('idle', 'moving', function (data, callback) {
    // Check some data we were passed
    if (data === 'ok') {
        // Callback the listener and tell them there was no error
        // (first argument is an err flag, set to false for no error)
        callback(false);
    } else {
        // Callback and say there was an error by passing anything other
        // than false in the first argument
        callback('Some error string, or true or any data');
    }
});

// Now change states and cause it to fail
fsm.enterState('moving', 'notOk', function (err, data) {
    if (!err) {
        // There was no error, the state changed successfully
        console.log('State changed!', fsm.currentStateName());
    } else {
        // There was an error, the state did not change
        console.log('State did NOT change!', fsm.currentStateName());
    }
});

// Now change states and pass "ok" in the data to make it proceed
fsm.enterState('moving', 'ok', function (err, data) {
    if (!err) {
        // There was no error, the state changed successfully
        console.log('State changed!', fsm.currentStateName());
    } else {
        // There was an error, the state did not change
        console.log('State did NOT change!', fsm.currentStateName());
    }
});
</code></pre>
</div>
					</div>
				
</div><a name="initialState"></a>
<h3 class="methodTitle">initialState</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">After defining your states, call this with the state name and the initial state of the FSM will be set.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">initialState</span>({<span class="argType">String</span>} <span class="argName">stateName</span>, {<span class="argType">*</span>} <span class="argName">data</span>, {<span class="argType">Function</span>} <span class="argName">callback</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">stateName</span> The state to set as the initial state.</li><li>{<span class="argType">*</span>}<span class="argName">data</span> Any data you wish to pass the state's "enter" method.</li><li>{<span class="argType">Function</span>}<span class="argName">callback</span> An optional callback method that will be called once the state has been entered successfully, or if there was an error.</li></ul></div>
    <div class="methodReturnDesc"></div>
    
</div><a name="getState"></a>
<h3 class="methodTitle">getState</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Gets the state definition object for the specified state name.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">getState</span>({<span class="argType">String</span>} <span class="argName">stateName</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">stateName</span> The name of the state who's definition object should be looked up and returned.</li></ul></div>
    <div class="methodReturnDesc">Returns {<span class="argType">Object</span>} The state definition object or undefined if no state exists with that name.</div>
    
</div><a name="enterState"></a>
<h3 class="methodTitle">enterState</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Tell the FSM to enter the state specified.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">enterState</span>({<span class="argType">String</span>} <span class="argName">newStateName</span>, {<span class="argType">*</span>} <span class="argName">data</span>, {<span class="argType">Function</span>} <span class="argName">callback</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">newStateName</span> The new state to enter.</li><li>{<span class="argType">*</span>}<span class="argName">data</span> Any data to pass to the exit and enter methods.</li><li>{<span class="argType">Function</span>}<span class="argName">callback</span> The optional callback method to call on completion.</li></ul></div>
    <div class="methodReturnDesc"></div>
    
</div><a name="exitState"></a>
<h3 class="methodTitle">exitState</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Tell the FSM to exit the current state and enter the previous state.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">exitState</span>({<span class="argType">Function</span>} <span class="argName">callback</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">Function</span>}<span class="argName">callback</span> Optional callback method once exiting the state has been executed.</li></ul></div>
    <div class="methodReturnDesc"></div>
    
</div><a name="_transitionStates"></a>
<h3 class="methodTitle">_transitionStates</h3>
<div class="methodSection">
    <!--=if{desc}[-->
    <div class="methodDesc">Handles changing states from one to another by checking for transitions and handling callbacks.</div>
    <!--=if{desc}]-->
    <div class="methodDefinition"><span class="methodName">_transitionStates</span>({<span class="argType">String</span>} <span class="argName">oldStateName</span>, {<span class="argType">String</span>} <span class="argName">newStateName</span>, {<span class="argType">*</span>} <span class="argName">data</span>, {<span class="argType">Function</span>} <span class="argName">callback</span>)</div>
    <div class="methodArgs"><ul class="argList"><li>{<span class="argType">String</span>}<span class="argName">oldStateName</span> The name of the state we are transitioning from.</li><li>{<span class="argType">String</span>}<span class="argName">newStateName</span> The name of the state we are transitioning to.</li><li>{<span class="argType">*</span>}<span class="argName">data</span> Optional data to pass to the exit and enter methods of each state.</li><li>{<span class="argType">Function</span>}<span class="argName">callback</span> Optional callback method to execute once the transition has been completed.</li></ul></div>
    <div class="methodReturnDesc"></div>
    
</div>	</div>
    <script type="text/javascript">
        $(function () {
            $('code').attr('data-language', 'javascript');
        });
    </script>
    <script type="text/javascript" src="../js/rainbow/rainbow-custom.min.js"></script>
</body>
</html>